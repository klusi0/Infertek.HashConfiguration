//Infertek.HashConfiguration v0.1.1 | (c) 2012 Tomasz Miku≈õ | http://www.opensource.org/licenses/mit-license
(function(e,t){e.Infertek||(e.Infertek={}),e.Infertek.HashConfiguration=function(n,r){var i="excludeFromHashConfiguration",s=function(){if(location.hash=="")return null;var e=location.hash.substr(1).split("&"),t={};for(var n=0;n<e.length;n++){var r=e[n].split("=");if(r.length!=2)continue;t[decodeURI(r[0])]=decodeURI(r[1])}return t},o=function(){var t="";for(var r in n){var s=n[r];if(s&&s[i])continue;if(ko.isObservable(s)&&!s.pop&&!s.push||ko.isComputed(s))s=s();else if(typeof s=="function")continue;if(!s||s==="")continue;t&&(t+="&"),t+=encodeURI(r),t+="=",s&&(t+=encodeURI(s))}e.Infertek.HashConfiguration.isUpdatingHash=!0,location.hash=t,e.Infertek.HashConfiguration.isUpdatingHash=!1},u=function(){if(e.Infertek.HashConfiguration.isUpdatingHash)return;var r=s();if(r)for(var o in r){if(n[o]===t||n[o][i])continue;if(ko.isObservable(n[o])&&!n[o].pop&&!n[o].push||ko.isComputed(n[o]))n[o](r[o]);else{if(typeof n[o]=="function")continue;n[o]=r[o]}}};u();if(r)for(var a in n){var f=n[a];if(!f||f[i])continue;(ko.isObservable(f)&&!f.pop&&!f.push||ko.isComputed(f))&&f.subscribe(function(){o()})}$(e).on("hashchange",u),this.updateHash=o},e.Infertek.HashConfiguration.excludeFromHash=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t].excludeFromHashConfiguration=!0;else e.excludeFromHashConfiguration=!0},Array.isArray||(Array.isArray=function(e){return e instanceof Array}),e.Infertek.HashConfiguration.isUpdatingHash=!1})(window,undefined)