//Infertek.HashConfiguration v0.1.0 | (c) 2012 Tomasz Miku≈õ | http://www.opensource.org/licenses/mit-license
(function(e,t){e.Infertek||(e.Infertek={}),e.Infertek.HashConfiguration=function(n,r){var i=function(){if(location.hash=="")return null;var e=location.hash.substr(1).split("&"),t={};for(var n=0;n<e.length;n++){var r=e[n].split("=");if(r.length!=2)continue;t[decodeURI(r[0])]=decodeURI(r[1])}return t},s=function(){var t="";for(var r in n){var i=n[r];if(ko.isObservable(i)||ko.isComputed(i))i=i();else if(typeof i=="function")continue;if(!i||i==="")continue;t&&(t+="&"),t+=encodeURI(r),t+="=",i&&(t+=encodeURI(i))}e.Infertek.HashConfiguration.isUpdatingHash=!0,location.hash=t,e.Infertek.HashConfiguration.isUpdatingHash=!1},o=function(){if(e.Infertek.HashConfiguration.isUpdatingHash)return;var r=i();if(r)for(var s in r){if(n[s]===t)continue;if(ko.isObservable(n[s])||ko.isComputed(n[s]))n[s](r[s]);else{if(typeof n[s]=="function")continue;n[s]=r[s]}}};o();if(r)for(var u in n){var a=n[u];(ko.isObservable(a)||ko.isComputed(a))&&a.subscribe(function(){s()})}$(e).on("hashchange",o),this.updateHash=s},e.Infertek.HashConfiguration.isUpdatingHash=!1})(window,undefined)